Лабораторная работа №1
 Пользователи и группы в linux

 Цель: ознакомиться с правилами создания пользователей и групп. Изучить права доступа и обьектам в ОС linux

1. Информация о пользователях доступна в файле /etc/passwd
Просмотр файла:
vim /etc/passwd
указаны имя пользователя, номер пользователя, номер группы, домашний каталог, командная оболочка

Информация о группах доступна в файле /etc/group
vim /etc/group
Указаны имя групп и номер группы

Закрытая для пользователей информация о паролях доступна для администратора в файле /etc/shadow
sudo /etc/shadow
Имя пользователя, пароль(или "!" в случае блокирования учетной записи), временные найстройки учетной записи (Время до смены пароля, время жизни записи и т.д.)

Заакрытая для пользователей информация о паролях для групп досутпна для админимтратора в файле /etc/gshadow
"!" - означает отсутствие паролядля групп

Правила доступа к любому обьекту устанавливаются администратором при помощи команды chmod
1 вариант:
sudo chmod 775 /home/tmp3
Установили полный доступ к каталогу /home/tmp3 для владельца каталога и группы владельцев , а для всех остальных пользователей - право на просмотр (х) и чтение каталога (г)
2 вариант:
sudo chmod o+w /home/tmp3
Установили право для всех пользователей на запись в каталог /home/tmp3
sudo chmod g-w /home/tmp3
Убрали право на запись у группы владельцев каталога /home/tmp3

Владельца и группу владельцев любого обьекта администратору можно поменять при помощи команды chown
sudo chown tmp4: student /home/tmp3/F1
Изсенили владельца каталога /home/tmp3/F1 на пользователя tmp4, а группу владельцев - на группу student
sudo chown :tmp4 /home/tmp3/readme

Изменили группу владельцев файла /home/tmp3/readme на группу tmp4

Для работы в других (существующих) группах можно использовать команду newgrp
newgrp tmp5
Для смены группы необходимо знать пароль группы
После смены группы можно получить общий доступ к обьектам по группе владельцев каждого обьекта
После завершения операции под общей группой выход из группы в свою группу по умолчанию осуществляется командой
exit

Расширенные права SUID, GUID, sticky bit
Бит SUID ПОЗВОЛЯЕТ ВЫПОЛНЯТЬ ФАЙЛ от имени владельца файла
эта возмодность используется для предоставления дополнительных прав процессу, когда необходимо обращение к недоступным для обычных пользователей ресурсам (например, для записи в файл /etc/shadow при смене пароля)
Установка бита оссуществляется командой chmod:

sudo chmod u+s "имя файла"
sudo chmod 4775 "имя файла"

Установленный бит отображается буквой s в разрешениях запуска для владельца файла:

Доступ: (4755/-rwsr-xr-x)

Если владелец не имеет прав доступа к выполнению файла, установленный бит отображается прописной буквой s
Доступ: (4655/-rwSr-xr-x)

SUID имеет смысл устанавливать для файлов но не для папок.

Бит GUID ПОЗВОЛЯЕТ запускать файлд от имени группы владельцев, а также модет влиять на режимы доступа к обьектам , напходящимся внутри папки с установленным битом GUID

Установка бита осуществляется комвандой chmod :

sudo chmod g+s "имя фвайла или имя папки"
sudo chmod 2775 "имя файла или имя папки"


при установке бита GUID на папку все обьекты, созданные внутри этой папки наследует группу владельцев
Установленный бит отображается буквой s в разрешениях для запуска джля группы владельцев:

Доступ: (2774/-rwxrwsr--) имя ФАЙЛА
Доступ: (2775/drwxrwsr-x) имя папки

каталоги внутри папки с установленным GUID БИТОМ  получает такую же группу владельцев и установленный GUID бит.

sticky bit устанавливается для изменения правил удаления обьектов внутри папки
Позваоляет запретить удаление для пользователей , которые имеют право на азпись , но не являются влвадельцами обьектов и не включены в группу влвадельцев папки

Установленный бит отображается буквой t в разрешениях на запуск для пользователей "other". Устанавливается только для папок
Установка бита:

sudo chmod o+t "имя файла"
sudo chmod 1775 "имя файла"

Пример установки sticky bit
student@alexander-VirtualBox:~$ mkdir StickyBit
student@alexander-VirtualBox:~$ stat StickyBit/
  Файл: StickyBit/
  Размер: 4096          Блоков: 8          Блок В/В: 4096   каталог
Устройство: 803h/2051d  Инода: 930226      Ссылки: 2
Доступ: (0775/drwxrwxr-x)  Uid: ( 1001/ student)   Gid: ( 1001/ student)
Доступ:        2024-11-06 09:05:46.969852837 +0700
Модифицирован: 2024-11-06 09:05:46.969852837 +0700
Изменён:       2024-11-06 09:05:46.969852837 +0700
Создан:        2024-11-06 09:05:46.969852837 +0700
student@alexander-VirtualBox:~$ sudo chmod o+w StickyBit/
student@alexander-VirtualBox:~$ stat StickyBit/
  Файл: StickyBit/
  Размер: 4096          Блоков: 8          Блок В/В: 4096   каталог
Устройство: 803h/2051d  Инода: 930226      Ссылки: 2
Доступ: (0777/drwxrwxrwx)  Uid: ( 1001/ student)   Gid: ( 1001/ student)
Доступ:        2024-11-06 09:05:46.969852837 +0700
Модифицирован: 2024-11-06 09:05:46.969852837 +0700
Изменён:       2024-11-06 09:06:38.697848765 +0700
Создан:        2024-11-06 09:05:46.969852837 +0700
student@alexander-VirtualBox:~$ sudo chmod o+t StickyBit/
student@alexander-VirtualBox:~$ stat StickyBit/
  Файл: StickyBit/
  Размер: 4096          Блоков: 8          Блок В/В: 4096   каталог
Устройство: 803h/2051d  Инода: 930226      Ссылки: 2
Доступ: (1777/drwxrwxrwt)  Uid: ( 1001/ student)   Gid: ( 1001/ student)
Доступ:        2024-11-06 09:05:46.969852837 +0700
Модифицирован: 2024-11-06 09:05:46.969852837 +0700
Изменён:       2024-11-06 09:07:41.874843792 +0700
Создан:        2024-11-06 09:05:46.969852837 +0700

После установки sticky bit удаление файлов владельца student для пользователя tmp3 запрещено:

tmp3@alexander-VirtualBox:/home/student/StickyBit$ rm f1
rm: невозможно удалить 'f1': Операция не позволена

При этом владельцу папки StickyBit разрешены операции удаления внутри папки


